# üèóÔ∏è Learnify Tech Stack & Architecture

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 5 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** Production Ready

---

## üìä –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Learnify Platform                         ‚îÇ
‚îÇ                     (Next.js 14 App)                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   Frontend     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    API Routes      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   (React)      ‚îÇ              ‚îÇ  /app/api/*        ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ         ‚îÇ                                    ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ Memberstack SDK                    ‚îÇ Prisma ORM   ‚îÇ
‚îÇ         ‚ñº                                    ‚ñº               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                                    ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  Memberstack    ‚îÇ              ‚îÇ   PostgreSQL DB    ‚îÇ
   ‚îÇ  (Auth & Users) ‚îÇ              ‚îÇ   (Course Data)    ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                                    ‚îÇ
          ‚îÇ                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ                         ‚îÇ                     ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  Stripe         ‚îÇ    ‚îÇ  Vimeo API      ‚îÇ  ‚îÇ  Cloudinary     ‚îÇ
   ‚îÇ  (Payments)     ‚îÇ    ‚îÇ  (Videos)       ‚îÇ  ‚îÇ  (Images)       ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  SendGrid       ‚îÇ
   ‚îÇ  (Emails)       ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Memberstack

### ‚úÖ **Memberstack –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è:**

#### 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (email + password)
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (login)
- ‚úÖ Session management (—Ç–æ–∫–µ–Ω—ã, cookies)
- ‚úÖ Password reset / forgot password
- ‚úÖ Email verification
- ‚úÖ Social login (Google, Facebook) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

#### 2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
- ‚úÖ User profiles (–∏–º—è, email, avatar)
- ‚úÖ Custom fields (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ Membership tiers (Free, Pro, Premium)
- ‚úÖ Access control (–∫—Ç–æ –∫ —á–µ–º—É –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø)

#### 3. **–ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã**
- ‚úÖ Protected pages (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- ‚úÖ Redirect –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ /login
- ‚úÖ Role-based access (admin, user, instructor)

#### 4. **–ü–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ Memberstack**
- ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–ú** - Memberstack –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ Stripe –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –Ω–µ –Ω—É–∂–Ω—ã –ø—Ä—è–º—ã–µ Stripe API keys
- Memberstack –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç checkout, webhooks –∏ subscription management

### üìã **Memberstack API Endpoints:**

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Memberstack
import memberstack from '@memberstack/dom';
const ms = memberstack('pk_live_xxx'); // public key

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
await ms.signupMemberEmailPassword({
  email: 'user@example.com',
  password: 'password123',
  customFields: { name: 'John Doe' }
});

// –í—Ö–æ–¥
await ms.loginMemberEmailPassword({
  email: 'user@example.com',
  password: 'password123'
});

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const member = await ms.getCurrentMember();

// –í—ã—Ö–æ–¥
await ms.logout();

// –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
await ms.updateMemberJSON({
  customFields: { name: 'New Name', avatar: 'url' }
});
```

### üîó **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:**

**–§–∞–π–ª:** `src/lib/memberstack.ts` (—É–∂–µ —Å–æ–∑–¥–∞–Ω, –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π SDK)

```typescript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Memberstack SDK
import memberstack from '@memberstack/dom';

const ms = memberstack(process.env.NEXT_PUBLIC_MEMBERSTACK_PUBLIC_KEY!);

// –ù–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Memberstack
export async function getCurrentUser() {
  const { data: member } = await ms.getCurrentMember();
  if (!member) return null;
  
  return {
    id: member.id,
    email: member.auth.email,
    name: member.customFields?.name || '',
    avatar: member.customFields?.avatar || '',
    membershipTier: member.planConnections?.[0]?.planId || 'free'
  };
}

export async function signIn(email: string, password: string) {
  const { data: member } = await ms.loginMemberEmailPassword({ email, password });
  return member;
}

export async function signUp(email: string, password: string, name: string) {
  const { data: member } = await ms.signupMemberEmailPassword({
    email,
    password,
    customFields: { name }
  });
  return member;
}
```

---

## üóÑÔ∏è –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Prisma + PostgreSQL

### ‚úÖ **–ù–∞—à–∞ –ë–î —Ö—Ä–∞–Ω–∏—Ç:**

#### 1. **–ö—É—Ä—Å—ã –∏ –∫–æ–Ω—Ç–µ–Ω—Ç**
```prisma
model Course {
  id          String   @id @default(uuid())
  title       String
  slug        String   @unique
  description String
  price       Decimal
  thumbnailUrl String
  categoryId  String
  lessons     Lesson[]
  enrollments Enrollment[]
  reviews     Review[]
  createdAt   DateTime @default(now())
}
```

#### 2. **–£—Ä–æ–∫–∏**
```prisma
model Lesson {
  id          String   @id @default(uuid())
  courseId    String
  title       String
  slug        String
  videoUrl    String?  // Vimeo URL
  content     String   // Markdown content
  order       Int
  duration    Int      // minutes
  isPreview   Boolean  @default(false)
  course      Course   @relation(fields: [courseId], references: [id])
}
```

#### 3. **Enrollments (–∑–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å—ã)**
```prisma
model Enrollment {
  id           String   @id @default(uuid())
  userId       String   // Memberstack user ID
  courseId     String
  enrolledAt   DateTime @default(now())
  completedAt  DateTime?
  progress     Int      @default(0) // 0-100%
  course       Course   @relation(fields: [courseId], references: [id])
  progresses   LessonProgress[]
  
  @@unique([userId, courseId])
}
```

#### 4. **–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º**
```prisma
model LessonProgress {
  id           String   @id @default(uuid())
  enrollmentId String
  lessonId     String
  completed    Boolean  @default(false)
  completedAt  DateTime?
  enrollment   Enrollment @relation(fields: [enrollmentId], references: [id])
  
  @@unique([enrollmentId, lessonId])
}
```

#### 5. **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏**
```prisma
model Review {
  id        String   @id @default(uuid())
  userId    String   // Memberstack user ID
  courseId  String
  rating    Int      // 1-5
  comment   String
  createdAt DateTime @default(now())
  course    Course   @relation(fields: [courseId], references: [id])
}
```

#### 6. **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
```prisma
model Certificate {
  id               String   @id @default(uuid())
  userId           String   // Memberstack user ID
  courseId         String
  certificateNumber String  @unique
  issuedAt         DateTime @default(now())
  pdfUrl           String?
  verificationCode String   @unique
}
```

#### 7. **Wishlist (—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫—É—Ä—Å—ã)**
```prisma
model Wishlist {
  id        String   @id @default(uuid())
  userId    String   // Memberstack user ID
  courseId  String
  addedAt   DateTime @default(now())
  
  @@unique([userId, courseId])
}
```

#### 8. **–ü–ª–∞—Ç–µ–∂–∏**
```prisma
model Payment {
  id              String   @id @default(uuid())
  userId          String   // Memberstack user ID
  courseId        String
  amount          Decimal
  currency        String   @default("USD")
  status          String   // pending, completed, failed
  stripeSessionId String   @unique
  createdAt       DateTime @default(now())
  completedAt     DateTime?
}
```

#### 9. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —É—Ä–æ–∫–∞–º**
```prisma
model Comment {
  id        String   @id @default(uuid())
  userId    String   // Memberstack user ID
  lessonId  String
  content   String
  createdAt DateTime @default(now())
  parentId  String?  // –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
}
```

#### 10. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**
```prisma
model Category {
  id      String   @id @default(uuid())
  name    String
  slug    String   @unique
  icon    String
  color   String
  courses Course[]
}
```

---

## üí≥ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Memberstack + Stripe

### ‚úÖ **Memberstack + Stripe –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç:**

#### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ (–≤ Memberstack Dashboard)**
- –í Memberstack —Å–æ–∑–¥–∞—é—Ç—Å—è Plans, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ü–µ–Ω–∞–º–∏ –≤ Stripe
- –ö–∞–∂–¥—ã–π –∫—É—Ä—Å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π Plan ID
- Memberstack –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç Stripe Products –∏ Prices

#### 2. **–ü–æ–∫—É–ø–∫–∞ –∫—É—Ä—Å–æ–≤ (Frontend)**
```typescript
// app/courses/[slug]/page.tsx
import { purchaseCourseWithMemberstack } from '@/lib/memberstack';

const handlePurchase = async () => {
  // Memberstack –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Stripe Checkout –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  const result = await purchaseCourseWithMemberstack(
    course.memberstackPlanId, // Plan ID –∏–∑ Memberstack
    course.id // metadata –¥–ª—è webhook
  );
  
  if (result.success) {
    // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã Memberstack –æ—Ç–ø—Ä–∞–≤–∏—Ç webhook
    toast.success('Purchase successful!');
  }
};
```

#### 3. **Webhooks (—á–µ—Ä–µ–∑ Memberstack)**
```typescript
// app/api/webhooks/memberstack/route.ts
export async function POST(request: Request) {
  const event = await request.json();
  
  if (event.type === 'member.plan.purchased') {
    const { memberId, planId, metadata } = event.data;
    const courseId = metadata.courseId;
    
    // –°–æ–∑–¥–∞—Ç—å enrollment
    await prisma.enrollment.create({
      data: { 
        userId: memberId, 
        courseId,
        planConnectionId: event.data.planConnectionId 
      }
    });
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email —á–µ—Ä–µ–∑ SendGrid
    await sendEnrollmentEmail(memberId, courseId);
  }
  
  return Response.json({ received: true });
}
```

#### 4. **Payment Portal (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏)**
```typescript
import { openPaymentPortal } from '@/lib/memberstack';

// Memberstack –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Stripe Customer Portal
await openPaymentPortal();
```

#### 5. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Memberstack:**
- ‚úÖ –ù–µ –Ω—É–∂–Ω—ã –ø—Ä—è–º—ã–µ Stripe API keys
- ‚úÖ Memberstack –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç PCI compliance
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è user data
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Payment Portal
- ‚úÖ –ü—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

---

## üé• –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Vimeo

### ‚úÖ **Vimeo –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:**

#### 1. **–í–∏–¥–µ–æ —Ö–æ—Å—Ç–∏–Ω–≥**
- –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤–∏–¥–µ–æ —É—Ä–æ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (360p, 720p, 1080p, 4K)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ (HLS)
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

#### 2. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä**
```typescript
// app/learn/[courseSlug]/[lessonSlug]/page.tsx
export default function LessonPage({ lesson }) {
  return (
    <div className="aspect-video">
      <iframe
        src={`https://player.vimeo.com/video/${lesson.vimeoId}?h=${lesson.vimeoHash}`}
        width="100%"
        height="100%"
        frameBorder="0"
        allow="autoplay; fullscreen; picture-in-picture"
        allowFullScreen
      />
    </div>
  );
}
```

#### 3. **API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ**
```typescript
import { Vimeo } from 'vimeo';

const vimeo = new Vimeo(
  process.env.VIMEO_CLIENT_ID!,
  process.env.VIMEO_CLIENT_SECRET!,
  process.env.VIMEO_ACCESS_TOKEN!
);

// –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (–¥–ª—è admin panel)
vimeo.upload(
  'path/to/video.mp4',
  { name: 'Lesson Title', privacy: { view: 'unlisted' } },
  (uri) => console.log('Video uploaded:', uri)
);
```

#### 4. **Privacy Settings**
- **Domain-level privacy**: –≤–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —Å –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
- **Password protection**: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- **Unlisted**: –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏

---

## üìß –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ SendGrid

### ‚úÖ **SendGrid –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:**

#### 1. **Transactional Emails**
```typescript
// lib/email.ts
import sgMail from '@sendgrid/mail';

sgMail.setApiKey(process.env.SENDGRID_API_KEY!);

export async function sendWelcomeEmail(userEmail: string, userName: string) {
  await sgMail.send({
    to: userEmail,
    from: 'hello@learnify.com',
    subject: 'Welcome to Learnify!',
    templateId: 'd-xxxxx', // SendGrid template
    dynamicTemplateData: { userName }
  });
}

export async function sendCourseEnrollmentEmail(userEmail: string, courseName: string) {
  await sgMail.send({
    to: userEmail,
    from: 'hello@learnify.com',
    subject: `You're enrolled in ${courseName}!`,
    templateId: 'd-yyyyy',
    dynamicTemplateData: { courseName }
  });
}

export async function sendCertificateEmail(userEmail: string, certificateUrl: string) {
  await sgMail.send({
    to: userEmail,
    from: 'hello@learnify.com',
    subject: 'Your Certificate is Ready!',
    templateId: 'd-zzzzz',
    dynamicTemplateData: { certificateUrl }
  });
}
```

#### 2. **Email Templates (–≤ SendGrid dashboard)**
- Welcome email
- Course enrollment confirmation
- Payment receipt
- Certificate earned
- Password reset
- Weekly digest

---

## üñºÔ∏è –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Cloudinary

### ‚úÖ **Cloudinary —Ö—Ä–∞–Ω–∏—Ç:**

#### 1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤**
```typescript
// lib/upload.ts
import { v2 as cloudinary } from 'cloudinary';

cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME!,
  api_key: process.env.CLOUDINARY_API_KEY!,
  api_secret: process.env.CLOUDINARY_API_SECRET!
});

export async function uploadCourseImage(file: File) {
  const formData = new FormData();
  formData.append('file', file);
  formData.append('upload_preset', 'learnify_courses');
  
  const response = await fetch(
    `https://api.cloudinary.com/v1_1/${process.env.CLOUDINARY_CLOUD_NAME}/image/upload`,
    { method: 'POST', body: formData }
  );
  
  const data = await response.json();
  return data.secure_url; // https://res.cloudinary.com/xxx/image/upload/xxx.jpg
}
```

#### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP
- Responsive images (—Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã)
- Lazy loading URLs
- CDN distribution

#### 3. **Transformations**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
const thumbnailUrl = `https://res.cloudinary.com/${cloudName}/image/upload/w_400,h_225,c_fill,q_auto,f_auto/${publicId}.jpg`;

// –î–ª—è hero –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
const heroUrl = `https://res.cloudinary.com/${cloudName}/image/upload/w_1920,h_1080,c_fill,q_auto,f_auto/${publicId}.jpg`;
```

---

## üéØ API Routes (Next.js)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API:

```
app/api/
‚îú‚îÄ‚îÄ courses/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts              # GET /api/courses (—Å–ø–∏—Å–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ [id]/route.ts         # GET /api/courses/[id] (–¥–µ—Ç–∞–ª–∏)
‚îÇ   ‚îî‚îÄ‚îÄ [id]/enroll/route.ts  # POST /api/courses/[id]/enroll
‚îÇ
‚îú‚îÄ‚îÄ lessons/
‚îÇ   ‚îú‚îÄ‚îÄ [id]/route.ts         # GET /api/lessons/[id]
‚îÇ   ‚îî‚îÄ‚îÄ [id]/complete/route.ts # POST /api/lessons/[id]/complete
‚îÇ
‚îú‚îÄ‚îÄ progress/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # GET /api/progress (–º–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å)
‚îÇ
‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts              # GET /POST /api/reviews
‚îÇ   ‚îî‚îÄ‚îÄ [id]/route.ts         # PUT /DELETE /api/reviews/[id]
‚îÇ
‚îú‚îÄ‚îÄ wishlist/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts              # GET /POST /api/wishlist
‚îÇ   ‚îî‚îÄ‚îÄ [courseId]/route.ts   # DELETE /api/wishlist/[courseId]
‚îÇ
‚îú‚îÄ‚îÄ certificates/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts              # GET /api/certificates
‚îÇ   ‚îú‚îÄ‚îÄ generate/route.ts     # POST /api/certificates/generate
‚îÇ   ‚îî‚îÄ‚îÄ verify/route.ts       # GET /api/certificates/verify?code=xxx
‚îÇ
‚îú‚îÄ‚îÄ checkout/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # POST /api/checkout (Stripe session)
‚îÇ
‚îú‚îÄ‚îÄ webhooks/
‚îÇ   ‚îú‚îÄ‚îÄ stripe/route.ts       # POST /api/webhooks/stripe
‚îÇ   ‚îî‚îÄ‚îÄ memberstack/route.ts  # POST /api/webhooks/memberstack
‚îÇ
‚îú‚îÄ‚îÄ comments/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts              # GET /POST /api/comments
‚îÇ   ‚îî‚îÄ‚îÄ [id]/route.ts         # PUT /DELETE /api/comments/[id]
‚îÇ
‚îú‚îÄ‚îÄ search/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # GET /api/search?q=keyword
‚îÇ
‚îî‚îÄ‚îÄ admin/
    ‚îú‚îÄ‚îÄ courses/route.ts      # Admin CRUD –¥–ª—è –∫—É—Ä—Å–æ–≤
    ‚îú‚îÄ‚îÄ users/route.ts        # Admin —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îî‚îÄ‚îÄ stats/route.ts        # Admin —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

---

## üîë Environment Variables

### `.env.local` (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

```bash
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/learnify"

# Memberstack
NEXT_PUBLIC_MEMBERSTACK_PUBLIC_KEY="pk_live_xxxxxxxxx"

# Stripe
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_live_xxxxxxxxx"
STRIPE_SECRET_KEY="sk_live_xxxxxxxxx"
STRIPE_WEBHOOK_SECRET="whsec_xxxxxxxxx"

# Vimeo
VIMEO_CLIENT_ID="xxxxxxxxx"
VIMEO_CLIENT_SECRET="xxxxxxxxx"
VIMEO_ACCESS_TOKEN="xxxxxxxxx"

# Cloudinary
CLOUDINARY_CLOUD_NAME="learnify"
CLOUDINARY_API_KEY="xxxxxxxxx"
CLOUDINARY_API_SECRET="xxxxxxxxx"

# SendGrid
SENDGRID_API_KEY="SG.xxxxxxxxx"

# App
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NODE_ENV="development"
```

### Production (Timeweb Cloud):
–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Dashboard ‚Üí Environment Variables

---

## üì¶ Dependencies (package.json)

```json
{
  "dependencies": {
    "next": "14.2.3",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "typescript": "5.4.5",
    
    "@prisma/client": "^5.20.0",
    "@memberstack/dom": "^2.0.0",
    "stripe": "^14.0.0",
    "@sendgrid/mail": "^8.1.0",
    "cloudinary": "^2.0.0",
    "vimeo": "^2.2.0",
    
    "framer-motion": "11.2.10",
    "lucide-react": "0.378.0",
    "zustand": "4.5.2",
    "tailwindcss": "3.4.3",
    
    "jspdf": "^2.5.1",
    "html2canvas": "^1.4.1",
    "zod": "^3.22.0",
    "react-hook-form": "^7.50.0"
  },
  "devDependencies": {
    "prisma": "^5.20.0",
    "@types/node": "20.12.12",
    "@types/react": "18.3.2",
    "eslint": "8.57.0",
    "eslint-config-next": "14.2.3"
  }
}
```

---

## üöÄ Deployment (Timeweb Cloud)

### –ß—Ç–æ –¥–µ–ø–ª–æ–∏–º:

```
1. Next.js Application (Timeweb Cloud App)
   ‚îú‚îÄ‚îÄ Build command: npm run build
   ‚îú‚îÄ‚îÄ Start command: npm start
   ‚îú‚îÄ‚îÄ Port: 3000
   ‚îî‚îÄ‚îÄ Environment: –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env

2. PostgreSQL Database (Timeweb Cloud DB)
   ‚îú‚îÄ‚îÄ Version: PostgreSQL 14+
   ‚îú‚îÄ‚îÄ Storage: 10GB (–Ω–∞—á–∞–ª—å–Ω—ã–π)
   ‚îî‚îÄ‚îÄ Connection: DATABASE_URL

3. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Next.js)
   ‚îú‚îÄ‚îÄ Images ‚Üí Cloudinary
   ‚îú‚îÄ‚îÄ Videos ‚Üí Vimeo
   ‚îî‚îÄ‚îÄ PDFs ‚Üí Cloudinary –∏–ª–∏ S3
```

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è:

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
npm run build
npm run prisma:generate
npm run prisma:migrate

# 2. Push –≤ Git
git push origin main

# 3. Timeweb Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# - –°–∫–∞—á–∏–≤–∞–µ—Ç –∫–æ–¥
# - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç dependencies
# - –ó–∞–ø—É—Å–∫–∞–µ—Ç build
# - –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

---

## ‚úÖ –ß—Ç–æ –î–ï–õ–ê–ï–ú —Å–∞–º–∏ (–≤ Next.js)

1. ‚úÖ **UI/UX** - –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –¥–∏–∑–∞–π–Ω
2. ‚úÖ **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** - –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è
3. ‚úÖ **API Routes** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** - —Å–≤—è–∑—ã–≤–∞–µ–º Memberstack, Stripe, Vimeo –∏ —Ç–¥
5. ‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
6. ‚úÖ **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
7. ‚úÖ **Reviews & Ratings** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤
8. ‚úÖ **Search** - –ø–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤
9. ‚úÖ **Wishlist** - —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
10. ‚úÖ **Comments** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —É—Ä–æ–∫–∞–º
11. ‚úÖ **Admin Panel** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
12. ‚úÖ **Analytics** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## ‚ùå –ß—Ç–æ –ù–ï –î–ï–õ–ê–ï–ú —Å–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ä–≤–∏—Å—ã)

1. ‚ùå **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Üí Memberstack
2. ‚ùå **–í–∏–¥–µ–æ —Ö–æ—Å—Ç–∏–Ω–≥** ‚Üí Vimeo
3. ‚ùå **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π** ‚Üí Stripe
4. ‚ùå **–û—Ç–ø—Ä–∞–≤–∫–∞ email** ‚Üí SendGrid
5. ‚ùå **–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚Üí Cloudinary
6. ‚ùå **CDN** ‚Üí Vercel/Timeweb Cloud (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–º–µ—Å—è—Ü)

| –°–µ—Ä–≤–∏—Å | –ü–ª–∞–Ω | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|--------|------|-----------|
| **Timeweb Cloud App** | Node.js Start | ~500‚ÇΩ |
| **Timeweb Cloud DB** | PostgreSQL 10GB | ~300‚ÇΩ |
| **Memberstack** | Pro Plan | $25 (~2300‚ÇΩ) |
| **Stripe** | Pay-as-you-go | 2.9% + $0.30 –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |
| **Vimeo Pro** | Pro Plan | $20/–º–µ—Å (~1800‚ÇΩ) |
| **Cloudinary** | Free tier | 0‚ÇΩ (–¥–æ 25GB) |
| **SendGrid** | Free tier | 0‚ÇΩ (–¥–æ 100 –ø–∏—Å–µ–º/–¥–µ–Ω—å) |
| **–ò–¢–û–ì–û** | | ~4900‚ÇΩ/–º–µ—Å + –∫–æ–º–∏—Å—Å–∏–∏ Stripe |

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏:

- **Memberstack ‚Üí NextAuth.js** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –Ω—É–∂–Ω–∞ —Å–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- **Vimeo ‚Üí YouTube** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –≤–∏–¥–µ–æ –ø—É–±–ª–∏—á–Ω—ã–µ)
- **SendGrid ‚Üí Nodemailer + Gmail** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –ª–∏–º–∏—Ç—ã)

---

## üéØ –ò—Ç–æ–≥–æ: –ò–¥–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

‚úÖ **Memberstack** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
‚úÖ **Next.js + Prisma + PostgreSQL** - –∫—É—Ä—Å—ã, –∫–æ–Ω—Ç–µ–Ω—Ç, –ø—Ä–æ–≥—Ä–µ—Å—Å, –æ—Ç–∑—ã–≤—ã  
‚úÖ **Stripe** - –ø–ª–∞—Ç–µ–∂–∏  
‚úÖ **Vimeo** - –≤–∏–¥–µ–æ —É—Ä–æ–∫–æ–≤  
‚úÖ **Cloudinary** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è  
‚úÖ **SendGrid** - email —Ä–∞—Å—Å—ã–ª–∫–∞  

**–í—Å—ë –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Next.js API routes.**  
**–û–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Timeweb Cloud.**  
**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ, –Ω–∞–¥—ë–∂–Ω–æ, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.**

---

üöÄ **–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!**
